<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./src/css/index.css">
    <link rel="stylesheet" href="./vendor/sweetalert/sweetalert2.min.css">
    <script src="./vendor/sweetalert/sweetalert2.min.js"></script>
<style>
      .hero-image {
        background-image: url("./src/img/slider.jpg");
        }
</style>
</head>
<body>


    <!-- INICIO MENU -->
<div class="row">
    <div class="col-12" style="min-height: 5px; background-color:#ff435e;">
        
    </div>
</div>
<nav class="navbar navbar-expand-sm bg-light navbar-light">
<div class="container-fluid">

<a class="navbar-brand" href="#"><img src="./src/img/logo.png" id="logo" alt="Logo"></a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="collapsibleNavbar">
<ul class="navbar-nav">
<li class="nav-item">
<a class="nav-link" href="#">Link</a>
</li>
<li class="nav-item">
<a class="nav-link" href="#">Link</a>
</li>
<li class="nav-item">
<a class="nav-link" href="#">Link</a>
</li>
</ul>
</div>
</div>
</nav>

<div class="hero-image">
    <div class="hero-text">
        <div class="row justify-content-center">
            <div class="col-md-8 border py-4" style="background-color: #00000069;">
                <div class="row">
                    <div class="col-12"><h4 class="w-100 text-center">REGISTRO DE PROPIETARIOS</h4></div>
                    <div class="col-md-3 text-center">
                        <img src="./src/img/Builder.png" id="img-registro">
                    </div>
                    <div class="col-md-9">
                        <form method="post" id="formulario" onsubmit="guardar()" action="javascript:void(0)">
                            <div class="row">
                                <div class="col-md-6 py-2">
                                    <div class="form-group">
                                        <label for="torre"><i class="fas fa-building me-2"></i>Torre</label>
                                        <select class="form-control form-control-sm" name="torre" id="torre" required>
                                            <option value="">- seleccionar -</option>
                                        </select>
                                    </div>
                                </div>
                
                                <div class="col-md-6 py-2">
                                    <div class="form-group">
                                        <label for="torre"><i class="fas fa-house-user me-2"></i>Apartamento</label>
                                        <select class="form-control form-control-sm" name="apto" id="apto" required>
                                            <option value="">- seleccionar -</option>
                                        </select>
                                    </div>
                                </div>
                
                                <div class="col-md-6 py-2">
                                    <div class="form-group">
                                        <label for="nombre"><i class="fas fa-user-alt me-2"></i>Nombre</label>
                                        <input name="nombre" type="text" class="form-control form-control-sm" placeholder="- ingrese nombre -" required>
                                    </div>
                                </div>
                
                                <div class="col-md-6 py-2">
                                    <div class="form-group">
                                        <label for="apellido"><i class="fas fa-user-alt me-2"></i>Apellido</label>
                                        <input name="apellido" type="text" class="form-control form-control-sm" placeholder="- ingrese apellido -" required>
                                    </div>
                                </div>
                
                                <div class="col-md-6 py-2">
                                    <div class="form-group">
                                        <label for="telefono"><i class="fas fa-mobile-alt me-2"></i>Teléfono</label>
                                        <input name="telefono" type="number" class="form-control form-control-sm" placeholder="- ingrese teléfono -" required>
                                    </div>
                                </div>
                
                                <div class="col-12 my-4">
                                    <button class="w-100 btn btn-sm" style="background-color:#ff435e; color: white!important"><span><i class="fas fa-save me-2"></i></span>Guardar</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
  </div>

      

    <script src="./vendor/jquery/jquery_3_6_0.min.js"></script>
    <script src="./vendor/bootstrap/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function(){
            for (i = 1; i < 34; i++) {
                $("#torre").append("<option value='"+i+"'>"+i+"</option>");
            }

            for (i = 1; i < 6; i++) {
                $("#apto").append("<option value='"+i+"01'>"+i+"01</option><option value='"+i+"02'>"+i+"02</option><option value='"+i+"03'>"+i+"03</option><option value='"+i+"04'>"+i+"04</option>");
            }
        });

        function guardar(){
            cargando();
            var formData = $("#formulario").serializeObject();
            console.log("Formulario");
            console.log(formData);
            var url = "./controller/PropietarioController.php";
            var data = { funcion : "crear", parametros : formData };
            var miInit = {  method: 'POST', body: JSON.stringify(data), headers:{ 'Content-Type': 'application/json' }};
            fetch(url, miInit).then(res => res.json()).catch(error =>  {
                Swal.fire({
                title: 'Puerto Bongoe',
                text: "¡No ha podido terminar satisfactoriamente, contacte al administrador!",
                icon: 'warning'})
            }).then(resp => {


                Swal.fire({
                title: 'Puerto Bongoe',
                text: "Registro Satisfactorio",
                icon: 'success',
                showCancelButton: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Aceptar'
                }).then((result) => {
                    if (result.isConfirmed) {
                        location.reload();
                    }
                })

                console.log("Respuesta");
                console.log(resp);
            });

        }

        function cargando(){
            Swal.fire({
                title: 'Puerto Bongoe',
                html: '¡Espere, por favor!',
                timerProgressBar: true,
                didOpen: () => {
                    Swal.showLoading()
                }
            })
            
        }


        $.fn.serializeObject = function()
        {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name]) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
        };


    </script>
</body>
</html>